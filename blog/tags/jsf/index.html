<!DOCTYPE html>
<html>
  <head>


    <!-- HTML meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta name="author" content="">
    <meta name="description" content="" />
    

    <title>Paul Dijou - Posts tagged with jsf</title>

    <!-- facebook open graph tags http://ogp.me/ -->
    <meta property="og:site_name" content="Paul Dijou" />
    <meta property="og:title" content="Posts tagged with jsf" />
    <meta property="og:url" content="http://pauldijou.fr/blog/tags/jsf/index.html" />
    <meta property="og:description" content="" />
    
      <meta property="og:type" content="website" />
    
    
    

    <!-- twitter card tags https://dev.twitter.com/cards/markup -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@paul_dijou" />
    
    <meta name="twitter:title" content="Paul Dijou - Posts tagged with jsf" />
    <meta name="twitter:description" content="" />

    <link rel="shortcut icon" type="image/png" href="/assets/favicon-5b92c61126199f7d62a67cca38b3e33bbdd0f7a7a836dbda27ef0f09ffd3e5eb.ico"/>
    <link type="text/css" rel="stylesheet" href="/assets/css/main-e66cbeb83467c4596e317baff024f2f5aafbe0950e29acbcca992eddbcabe00c.css">
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400' rel='stylesheet' type='text/css'/>

    <!--[if lt IE 8]>
      <link href="/stylesheets/ie.css" media="screen, projection" rel="stylesheet" type="text/css">
    <![endif]-->

    

    
      <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-25058935-1', 'auto');
        ga('send', 'pageview');
      </script>
    
  </head>
  <body>
    <header id="nav" class="nav">
  <ul class="list-unstyled">
    
      <li>
        <a href="/">
          <span class="icon fa fa-home fa-fw fa-2x"></span>
          <span class="nav-label">Home</span>
        </a>
      </li>
    
      <li>
        <a href="/blog/">
          <span class="icon fa fa-coffee fa-fw fa-2x"></span>
          <span class="nav-label">Blog</span>
        </a>
      </li>
    
      <li>
        <a href="/resume/">
          <span class="icon fa fa-code fa-fw fa-2x"></span>
          <span class="nav-label">Resume</span>
        </a>
      </li>
    
      <li>
        <a href="/projects/">
          <span class="icon fa fa-flask fa-fw fa-2x"></span>
          <span class="nav-label">Projects</span>
        </a>
      </li>
    
      <li>
        <a href="/about/">
          <span class="icon fa fa-user fa-fw fa-2x"></span>
          <span class="nav-label">About</span>
        </a>
      </li>
    
      <li>
        <a href="/contact/">
          <span class="icon fa fa-envelope fa-fw fa-2x"></span>
          <span class="nav-label">Contact</span>
        </a>
      </li>
    
      <li>
        <a href="/archives/">
          <span class="icon fa fa-archive fa-fw fa-2x"></span>
          <span class="nav-label">Archives</span>
        </a>
      </li>
    
    <li class="nav-back">
      <a href="#">
        <span class="icon fa fa-undo fa-fw fa-2x"></span>
        <span class="nav-label">Back to page</span>
      </a>
    </li>
  </ul>
</header>

<div class="nav-menu">
  <a href="#nav">Menu</a>
</div>

<div class="page container">
  <div class="posts">
  
    









<article class="post">
  <h2>
    <a href="/blog/2012/05/08/jsf-bootstrap-render-all/">JSF, Bootstrap and calling render=@all</a>
  </h2>

  <div class="meta">
    Posted by
    <span class="author"></span>
    
      on
      <span class="date">May 08, 2012</span>
    
    <span class="separator"></span>

    
      <span class="visible-md-inline visible-lg-inline"><span class="icon fa fa-comments fa-fw"></span></span>
      <a href="/blog/2012/05/08/jsf-bootstrap-render-all/#disqus_thread" data-disqus-identifier="/blog/2012/05/08/jsf-bootstrap-render-all">Comments</a>
      <span class="separator"></span>
    

    <span class="visible-md-inline visible-lg-inline"><span class="icon fa fa-pencil-square-o fa-fw"></span></span>
    <a class="improve visible-md-inline visible-lg-inline" href="https://github.com/pauldijou/pauldijou.github.com/edit/develop/_posts/2012-05-08-jsf-bootstrap-render-all.md" target="_blank">Improve this article</a>
  </div>

  <div class="content">
    <h3 id="the-problem">The problem</h3>

<p>So, the other day, I was playing with <a href="http://twitter.github.com/bootstrap/index.html">Twitter Bootstrap</a> on a JSF application. Everything was fine until I decide to use a <code class="highlighter-rouge">render="@all"</code> somewhere in the page in order to refresh all my components after quite an heavy operation. Working fine.</p>

<p>But Bootstrap was no longer fully healthy. The CSS and design were ok, but the JavaScript was all broken : nearly all effects didn’t appear anymore. It was a bit strange so I hit F5 and everything was fine, all JavaScript events were back. But the moment my <code class="highlighter-rouge">render="@all"</code> was called, they disappear again.</p>

<h3 id="why">Why?</h3>

<p>After some investigations, the reason was that Bootstrap calls a JavaScript function that will attach most of its events to the <code class="highlighter-rouge">&lt;body&gt;</code> when the HTML DOM is ready. Its doing so in order to catch all user interactions when they bubble up to the <code class="highlighter-rouge">&lt;body&gt;</code> tag which wrap the whole page. With that, you can use Ajax as much as you want and update your DOM since there is no event attach to a particular HTML tag, they are all in the <code class="highlighter-rouge">&lt;body&gt;</code> tag.</p>

<p>That’s really good but that’s also the reason of the problem. I said Ajax is always fine, and it’s true as long as you don’t touch the @&lt;body&gt;@ tag. The moment you update this tag, it will probably be reset to it’s initial state, without any JavaScript event, and since the Bootstrap JavaScript function is only called once when the DOM is ready the first time, JavaScript events will not come back. Guess what, <code class="highlighter-rouge">render="@all"</code> will render your <code class="highlighter-rouge">&lt;h:body&gt;</code> and so will broke all Bootstrap JavaScript events.</p>

<h3 id="a-workaround">A workaround</h3>

<p>The true solution would be to call the Bootstrap JavaScript function after each <code class="highlighter-rouge">render="@all"</code> in order to attach all JavaScript events again. But since I have no idea how to do that right now, I have chosen to use an easier workaround.</p>

<p>Just wrapping your whole page in a JSF panel and render it instead of <code class="highlighter-rouge">render="@all"</code> should be enough in most use case. It is not exactly the same behaviour, but in most case, when calling <code class="highlighter-rouge">render="@all"</code>, what you really want is just refreshing your whole page using Ajax. For example:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en-US"</span>
      <span class="na">xmlns=</span><span class="s">"http://www.w3.org/1999/xhtml"</span>
      <span class="na">xmlns:h=</span><span class="s">"http://java.sun.com/jsf/html"</span>
      <span class="na">xmlns:f=</span><span class="s">"http://java.sun.com/jsf/core"</span>
      <span class="na">xmlns:ui=</span><span class="s">"http://java.sun.com/jsf/facelets"</span><span class="nt">&gt;</span>
<span class="nt">&lt;h:head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Site title<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/h:head&gt;</span>
<span class="nt">&lt;h:body&gt;</span>
    <span class="nt">&lt;h:panelGroup</span> <span class="na">id=</span><span class="s">"all"</span><span class="nt">&gt;</span>
        ... your code...
    <span class="nt">&lt;/h:panelGroup&gt;</span>
<span class="nt">&lt;/h:body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>And replace all your <code class="highlighter-rouge">render="@all"</code> with <code class="highlighter-rouge">render="all"</code>.</p>

  </div>

  <div class="footer">
    <span class="hidden-xs hidden-sm">
      <span class="icon fa fa-link fa-fw"></span>
      <a href="http://pauldijou.fr/blog/2012/05/08/jsf-bootstrap-render-all/">Permalink</a>
    </span>
    <span class="separator"></span>

    <span class="visible-md-inline visible-lg-inline"><span class="icon fa fa-pencil-square-o fa-fw"></span></span>
    <a href="https://github.com/pauldijou/pauldijou.github.com/edit/develop/_posts/2012-05-08-jsf-bootstrap-render-all.md" target="_blank" class="improve visible-md-inline visible-lg-inline">Improve this article</a>
    <a href="https://github.com/pauldijou/pauldijou.github.com/edit/develop/_posts/2012-05-08-jsf-bootstrap-render-all.md" target="_blank" class="improve button block hidden-md hidden-lg">
      <span class="icon fa fa-pencil-square fa-fw"></span>
      Improve this article
    </a>

    
      <div class="tags">
        <span class="icon fa fa-tags fa-fw"></span>
        Tags:
        
          <a class="tag label label-default" href="/blog/tags/jsf/">jsf</a>
        
          <a class="tag label label-default" href="/blog/tags/bootstrap/">bootstrap</a>
        
      </div>
    

  </div>

  
</article>

  
</div>

<ul class="list-inline pagination text-center visible-xs visible-sm">
  <li>
    
      <span class="button disabled">
        <span class="icon fa fa-angle-left fa-lg"></span>
        Previous
      </span>
    
  </li>

  <li>
    
      <span class="button disabled">
        Next
        <span class="icon fa fa-angle-right fa-lg"></span>
      </span>
    
  </li>
</ul>

<ul class="list-inline pagination text-center hidden-xs hidden-sm">
    
      <li>
        <span class="button disabled">
          <span class="icon fa fa-angle-double-left fa-lg"></span>
          First
        </span>
      </li>
      <li>
        <span class="button disabled">
          <span class="icon fa fa-angle-left fa-lg"></span>
          Previous
        </span>
      </li>
    

    <li>
      <span class="button">1 of 1</span>
    </li>

    
      <li>
        <span class="button disabled">
          Next
          <span class="icon fa fa-angle-right fa-lg"></span>
        </span>
      </li>
      <li>
        <span class="button disabled">
          Last
          <span class="icon fa fa-angle-double-right fa-lg"></span>
        </span>
      </li>
    
</ul>

<div style="margin-bottom:20px;text-align:center;">
  <a class="button" href="http://feeds2.feedburner.com/pauldijou">
  <span class="icon fa fa-rss fa-lg"></span>
  Subscribe
</a>

</div>

<script id="dsq-count-scr" src="https://pauldijou.disqus.com/count.js" async></script>


</div>


    <script type="text/javascript" src="/assets/js/main-a35bb44a42985a5ff06fe724109076616abccf20668ed9c7419518a3b125015d.js"></script>

    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->

    
  </body>
</html>
